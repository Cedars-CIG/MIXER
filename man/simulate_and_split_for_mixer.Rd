% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate_and_split.R
\name{simulate_and_split_for_mixer}
\alias{simulate_and_split_for_mixer}
\title{Simulate a binary response and split data into train/validation/test sets}
\usage{
simulate_and_split_for_mixer(
  df_feature = NULL,
  effect_size = 1,
  feature_causal_positive = 50,
  feature_causal_negative = 50,
  target_prev = 0.14,
  train_prop = 0.8,
  val_prop = 0.1,
  test_prop = 0.1,
  iid_col = "IID",
  beta_sd = 0.2,
  seed = 12345
)
}
\arguments{
\item{df_feature}{A data.frame containing an ID column and feature columns.
If \code{NULL}, uses \code{features_example}.}

\item{effect_size}{Mean magnitude of causal effects (positive effects centered at
\code{+effect_size}, negative effects centered at \code{-effect_size}).}

\item{feature_causal_positive}{Number of causal features with positive effects.}

\item{feature_causal_negative}{Number of causal features with negative effects.}

\item{target_prev}{Target prevalence for \code{y = 1}. Default is 0.14.}

\item{train_prop}{Proportion for training set. Default is 0.8.}

\item{val_prop}{Proportion for validation set. Default is 0.1.}

\item{test_prop}{Proportion for test set. Default is 0.1.}

\item{iid_col}{Name of the ID column. Default is \code{"IID"}.}

\item{beta_sd}{Standard deviation around \code{+/-effect_size} for causal effects.}

\item{seed}{Random seed for reproducibility.}
}
\value{
A list with elements:
\itemize{
\item \code{y_train}, \code{y_val}, \code{y_test}
\item \code{feature_train}, \code{feature_val}, \code{feature_test}
\item \code{causal_table} (data.frame with causal features and coefficients)
\item \code{intercept} (calibrated intercept)
\item \code{prevalence_observed} (mean of simulated \code{y})
}
}
\description{
This utility simulates a binary outcome \code{y} from a subset of causal features
using a logistic model with a calibrated intercept to match a target prevalence.
It then performs a stratified split (by \code{y}) into train/validation/test sets.
}
\details{
If \code{df_feature} is \code{NULL}, the function will load the internal example
dataset \code{features_example} shipped with the MIXER package.
}
\examples{
\dontrun{
# Use built-in example feature matrix
out <- simulate_and_split_for_mixer(
  effect_size = 1,
  feature_causal_positive = 50,
  feature_causal_negative = 50,
  target_prev = 0.14,
  seed = 1
)

# Or provide your own feature data.frame
# df_feature <- read.csv("my_features.csv")
# out <- simulate_and_split_for_mixer(df_feature)
}

}
